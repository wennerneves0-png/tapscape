<script type="module">
    import React, { useState, useEffect, useCallback, useRef } from 'react';
    import ReactDOM from 'react-dom/client';
    import { GoogleGenAI } from '@google/genai';

    const MONETAG_URL = 'https://otieu.com/4/10391615';

    const GameStatus = { MENU: 'MENU', PLAYING: 'PLAYING', GAMEOVER: 'GAMEOVER', ACHIEVEMENTS: 'ACHIEVEMENTS' };
    const GameMode = { PRINCIPIANTE: 'PRINCIPIANTE', CAOTICO: 'CAOTICO', EXPERT: 'EXPERT' };

    const translations = {
        'pt': {
            score_label: 'SCORE', time_label: 'TEMPO', nick_instruction: 'Identifique-se, Recruta!',
            nick_placeholder: 'Seu apelido...', save_nick: 'SALVAR PERFIL', agent_label: 'Agente',
            change_profile: '(Trocar)', mode_beginner_desc: '1 Bot√£o ‚Ä¢ Tempo Estendido',
            mode_chaotic_desc: '2 Bot√µes ‚Ä¢ Reflexo M√©dio', mode_expert_desc: '3 Bot√µes ‚Ä¢ Morte S√∫bita',
            game_over: 'FIM DE JOGO', best_label: 'RECORDE', restart_mission: 'REINICIAR TUDO',
            continue_mission: 'CONTINUAR COM A MESMA PONTUA√á√ÉO (ASSISTIR AN√öNCIO)', back_to_menu: 'MENU PRINCIPAL',
            medal_label: 'PATENTE', achievement_unlocked: 'CONQUISTA!', achievements_title: 'CENTRAL DE CONQUISTAS',
            waiting_ad: 'VOLTE PARA O JOGO PARA RETOMAR...', chances_label: 'Chances restantes:',
            limit_reached: 'Limite de chances atingido', click_btn: 'CLICA AQUI', no_btn: 'N√ÉO CLICA',
            default_coach: 'O treinamento continua. N√£o desista agora.',
            ach_list: {
                start: { name: 'Recruta', desc: 'Iniciou sua jornada.' },
                bronze: { name: 'Bronze', desc: 'Alcan√ßou 15 pontos.' },
                silver: { name: 'Prata', desc: 'Alcan√ßou 45 pontos.' },
                gold: { name: 'Ouro', desc: 'Alcan√ßou 85 pontos.' },
                diamond: { name: 'Diamante', desc: 'Alcan√ßou 125 pontos.' },
                platinum: { name: 'Platina', desc: 'Alcan√ßou 150 pontos.' },
                master: { name: 'Especialista', desc: 'Alcan√ßou 250 pontos.' },
                infinite: { name: 'Infinito', desc: 'Alcan√ßou 500 pontos!' },
                god: { name: 'Celestial', desc: 'Alcan√ßou 1000 pontos!' },
                new_record: { name: 'Novo Recorde', desc: 'Superou seus limites.' }
            },
            ai_prompt: (s, m, b) => `Sou um jogador que fez ${s} pontos no modo ${m} do jogo "Clique & Fuga". Meu recorde √© ${b}. D√™ um coment√°rio curto e sarc√°stico em portugu√™s do Brasil.`
        },
        'en': {
            score_label: 'SCORE', time_label: 'TIME', nick_instruction: 'Identify yourself, Recruit!',
            nick_placeholder: 'Nickname...', save_nick: 'SAVE PROFILE', agent_label: 'Agent',
            change_profile: '(Change)', mode_beginner_desc: '1 Button ‚Ä¢ Extended Time',
            mode_chaotic_desc: '2 Buttons ‚Ä¢ Medium Reflex', mode_expert_desc: '3 Buttons ‚Ä¢ Sudden Death',
            game_over: 'GAME OVER', best_label: 'BEST', restart_mission: 'RESTART ALL',
            continue_mission: 'CONTINUE WITH SAME SCORE (WATCH AD)', back_to_menu: 'MAIN MENU',
            medal_label: 'RANK', achievement_unlocked: 'ACHIEVEMENT!', achievements_title: 'ACHIEVEMENT HUB',
            waiting_ad: 'RETURN TO GAME TO RESUME...', chances_label: 'Chances left:',
            limit_reached: 'Chances limit reached', click_btn: 'CLICK HERE', no_btn: 'DONT CLICK',
            default_coach: 'Training continues. Do not give up now.',
            ach_list: {
                start: { name: 'Recruit', desc: 'Started your journey.' },
                bronze: { name: 'Bronze', desc: 'Reached 15 points.' },
                silver: { name: 'Silver', desc: 'Reached 45 points.' },
                gold: { name: 'Gold', desc: 'Reached 85 points.' },
                diamond: { name: 'Diamond', desc: 'Reached 125 points.' },
                platinum: { name: 'Platinum', desc: 'Reached 150 points.' },
                master: { name: 'Expert', desc: 'Reached 250 points.' },
                infinite: { name: 'Infinite', desc: 'Reached 500 points!' },
                god: { name: 'Celestial', desc: 'Reached 1000 points!' },
                new_record: { name: 'New Record', desc: 'Surpassed your limits.' }
            },
            ai_prompt: (s, m, b) => `I am a player who scored ${s} points in ${m} mode in "Clique & Fuga". My record is ${b}. Give a short and sarcastic comment in English.`
        }
    };

    const getMedalInfo = (score) => {
        if (score >= 1000) return { name: 'Celestial', icon: 'üåå', color: 'text-orange-300', glow: 'shadow-[0_0_25px_rgba(251,146,60,0.7)]' };
        if (score >= 500) return { name: 'Infinito', icon: 'üåÄ', color: 'text-orange-400', glow: 'shadow-[0_0_20px_rgba(249,115,22,0.6)]' };
        if (score >= 300) return { name: 'Imortal', icon: 'üõ°Ô∏è', color: 'text-orange-500', glow: 'shadow-[0_0_15px_rgba(234,88,12,0.5)]' };
        if (score >= 150) return { name: 'Platina', icon: 'üü£', color: 'text-purple-400', glow: 'shadow-[0_0_15px_rgba(192,132,252,0.5)]' };
        if (score >= 125) return { name: 'Diamante', icon: 'üíé', color: 'text-cyan-300', glow: 'shadow-[0_0_15px_rgba(103,232,249,0.5)]' };
        if (score >= 85) return { name: 'Ouro', icon: 'ü•á', color: 'text-yellow-500', glow: '' };
        if (score >= 45) return { name: 'Prata', icon: 'ü•à', color: 'text-slate-300', glow: '' };
        if (score >= 15) return { name: 'Bronze', icon: 'ü•â', color: 'text-orange-700', glow: '' };
        return null;
    };

    const MODE_CONFIG = {
        [GameMode.PRINCIPIANTE]: { initialTime: 5000, reduction: 45, minTime: 900, buttons: 1, scale: 0.012, darkness: 0.01 },
        [GameMode.CAOTICO]:      { initialTime: 2500, reduction: 65, minTime: 500, buttons: 2, scale: 0.022, darkness: 0.03 },
        [GameMode.EXPERT]:       { initialTime: 1300, reduction: 85, minTime: 300, buttons: 3, scale: 0.040, darkness: 0.05 }
    };

    const App = () => {
        const [status, setStatus] = useState(GameStatus.MENU);
        const [mode, setMode] = useState(GameMode.PRINCIPIANTE);
        const [score, setScore] = useState(0);
        const [timeLeft, setTimeLeft] = useState(0);
        const [maxTime, setMaxTime] = useState(0);
        const [buttons, setButtons] = useState([]);
        const [buttonScale, setButtonScale] = useState(1);
        const [overlayOpacity, setOverlayOpacity] = useState(0);
        const [isShaking, setIsShaking] = useState(false);
        const [playerName, setPlayerName] = useState(localStorage.getItem('player-name') || '');
        const [isNameSaved, setIsNameSaved] = useState(!!localStorage.getItem('player-name'));
        const [continueCount, setContinueCount] = useState(0);
        const [language, setLanguage] = useState('pt');
        const [isWaitingForAd, setIsWaitingForAd] = useState(false);
        const [newAchievement, setNewAchievement] = useState(null);
        
        const timerRef = useRef(null);
        const audioCtxRef = useRef(null);

        useEffect(() => {
            const browserLang = (navigator.language || 'pt').split('-')[0];
            setLanguage(translations[browserLang] ? browserLang : 'pt');
        }, []);

        const t = translations[language] || translations['pt'];

        const initAudio = useCallback(() => {
            if (!audioCtxRef.current) audioCtxRef.current = new (window.AudioContext || window.webkitAudioContext)();
            if (audioCtxRef.current.state === 'suspended') audioCtxRef.current.resume();
        }, []);

        const playSfx = useCallback((freq, type = 'sine', vol = 0.08, dur = 0.1) => {
            if (!audioCtxRef.current || audioCtxRef.current.state !== 'running') return;
            const osc = audioCtxRef.current.createOscillator();
            const g = audioCtxRef.current.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtxRef.current.currentTime);
            g.gain.setValueAtTime(vol, audioCtxRef.current.currentTime);
            g.gain.exponentialRampToValueAtTime(0.001, audioCtxRef.current.currentTime + dur);
            osc.connect(g);
            g.connect(audioCtxRef.current.destination);
            osc.start();
            osc.stop(audioCtxRef.current.currentTime + dur);
        }, []);

        const findSafePosition = useCallback((existing, scale) => {
            const HUD_RESERVED_Y = 28;
            const MARGIN = 12;
            const MIN_DIST = 20 * scale;
            for (let i = 0; i < 250; i++) {
                const candidate = { x: MARGIN + Math.random() * (100 - MARGIN * 2), y: HUD_RESERVED_Y + Math.random() * (100 - HUD_RESERVED_Y - MARGIN) };
                const collides = existing.some(p => Math.abs(p.x - candidate.x) < MIN_DIST && Math.abs(p.y - candidate.y) < MIN_DIST);
                if (!collides) return candidate;
            }
            return { x: 50, y: 50 };
        }, []);

        const generateButtons = useCallback((count, scale) => {
            const newButtons = [];
            const positions = [];
            const correctIdx = Math.floor(Math.random() * count);
            for (let i = 0; i < count; i++) {
                const pos = findSafePosition(positions, scale);
                positions.push(pos);
                newButtons.push({ id: Date.now() + i, position: pos, isCorrect: i === correctIdx });
            }
            setButtons(newButtons);
        }, [findSafePosition]);

        const checkAchievements = useCallback((finalScore) => {
            const achievements = JSON.parse(localStorage.getItem('cf-achievements') || '[]');
            const unlockedIds = new Set(achievements.map(a => a.id));
            const thresholds = [
                { id: 'start', val: 1 }, { id: 'bronze', val: 15 }, { id: 'silver', val: 45 }, { id: 'gold', val: 85 },
                { id: 'diamond', val: 125 }, { id: 'platinum', val: 150 }, { id: 'master', val: 250 }, { id: 'infinite', val: 500 }, { id: 'god', val: 1000 }
            ];
            let newly = null;
            thresholds.forEach(t => { if (finalScore >= t.val && !unlockedIds.has(t.id)) { newly = { id: t.id, unlockedAt: Date.now(), score: finalScore }; achievements.push(newly); } });
            if (newly) { localStorage.setItem('cf-achievements', JSON.stringify(achievements)); setNewAchievement(newly); playSfx(523, 'square', 0.1, 0.4); }
        }, [playSfx]);

        const endGame = useCallback(() => {
            setStatus(GameStatus.GAMEOVER);
            clearInterval(timerRef.current);
            checkAchievements(score);
            const best = parseInt(localStorage.getItem(`cf-best-${mode}`) || '0');
            if (score > best) localStorage.setItem(`cf-best-${mode}`, score.toString());
        }, [score, mode, checkAchievements]);

        const startGame = (selMode) => {
            initAudio();
            const cfg = MODE_CONFIG[selMode];
            setMode(selMode); setScore(0); setContinueCount(0);
            setMaxTime(cfg.initialTime); setTimeLeft(cfg.initialTime);
            setButtonScale(1); setOverlayOpacity(0); setStatus(GameStatus.PLAYING);
            generateButtons(cfg.buttons, 1);
        };

        const handleButtonClick = (e, isCorrect) => {
            e.stopPropagation();
            if (status !== GameStatus.PLAYING || isWaitingForAd) return;
            if (!isCorrect) { playSfx(110, 'sawtooth', 0.4, 0.3); endGame(); return; }
            playSfx(880, 'sine', 0.05, 0.08);
            const cfg = MODE_CONFIG[mode];
            const newScore = score + 1;
            setScore(newScore);
            const nextTime = Math.max(cfg.minTime, cfg.initialTime - (newScore * cfg.reduction));
            const nextScale = Math.max(0.4, 1.3 - (newScore * cfg.scale));
            setMaxTime(nextTime); setTimeLeft(nextTime); setButtonScale(nextSc = nextScale);
            if (mode !== GameMode.PRINCIPIANTE) setOverlayOpacity(Math.min(0.85, newScore * cfg.darkness));
            generateButtons(cfg.buttons, nextScale);
        };

        useEffect(() => {
            if (status === GameStatus.PLAYING && !isWaitingForAd) {
                timerRef.current = setInterval(() => {
                    setTimeLeft(prev => { if (prev <= 0) { endGame(); return 0; } return prev - 10; });
                }, 10);
            }
            return () => clearInterval(timerRef.current);
        }, [status, endGame, isWaitingForAd]);

        useEffect(() => {
            const handleReturn = () => { if (document.visibilityState === 'visible' && isWaitingForAd) { 
                setIsWaitingForAd(false); setStatus(GameStatus.PLAYING);
                const cfg = MODE_CONFIG[mode]; generateButtons(cfg.buttons, buttonScale); 
            }};
            window.addEventListener('visibilitychange', handleReturn);
            return () => window.removeEventListener('visibilitychange', handleReturn);
        }, [isWaitingForAd, mode, buttonScale, generateButtons]);

        return (
            <div className={`relative w-full h-screen bg-slate-950 overflow-hidden transition-all duration-300 ${isShaking ? 'animate-shake' : ''}`} onClick={() => { if (status === GameStatus.PLAYING && !isWaitingForAd) { setIsShaking(true); setTimeout(() => setIsShaking(false), 300); playSfx(110, 'sawtooth', 0.4, 0.3); endGame(); } }}>
                <div className="absolute inset-0 bg-black pointer-events-none z-10 transition-opacity duration-300" style={{ opacity: overlayOpacity }} />
                
                {newAchievement && (
                    <div className="fixed top-8 left-1/2 -translate-x-1/2 z-[300] w-full max-w-sm px-4 animate-in slide-in-from-top-10 duration-700">
                        <div className="bg-slate-900/95 backdrop-blur-2xl border-2 border-yellow-500/60 rounded-3xl p-5 flex items-center gap-5 shadow-[0_0_40px_rgba(234,179,8,0.3)] ring-1 ring-white/10">
                            <div className="text-4xl filter drop-shadow-[0_0_10px_rgba(234,179,8,0.8)] animate-pulse">üèÜ</div>
                            <div className="flex-1">
                                <p className="text-yellow-500 font-orbitron text-[11px] uppercase tracking-[0.2em] font-black leading-none mb-1.5">{t.achievement_unlocked}</p>
                                <h4 className="text-white font-orbitron font-black text-lg uppercase tracking-tighter leading-tight">{t.ach_list[newAchievement.id]?.name}</h4>
                                <button onClick={() => setNewAchievement(null)} className="absolute top-2 right-2 text-white/20 hover:text-white">‚úï</button>
                            </div>
                        </div>
                    </div>
                )}

                {status === GameStatus.MENU && (
                    <div className="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-30 overflow-y-auto">
                        <h1 className="text-white font-orbitron text-5xl md:text-8xl font-black tracking-tighter mb-2 leading-tight">CLIQUE <span className="text-red-500">&</span> FUGA</h1>
                        <div className="w-32 h-1 bg-red-600 mb-8 mx-auto rounded-full" />
                        {!isNameSaved ? (
                            <div className="w-full max-w-md">
                                <p className="text-slate-400 text-lg mb-6">{t.nick_instruction}</p>
                                <input type="text" placeholder={t.nick_placeholder} onChange={(e) => setPlayerName(e.target.value.substring(0, 10))} className="w-full bg-black border border-slate-700 rounded-xl p-4 text-center font-orbitron text-white text-lg outline-none focus:border-red-500 mb-4" />
                                <button onClick={() => { if (playerName.trim()) { setIsNameSaved(true); localStorage.setItem('player-name', playerName); initAudio(); } }} className="w-full py-4 bg-red-600 hover:bg-red-500 text-white font-orbitron font-bold rounded-xl shadow-lg uppercase tracking-widest">{t.save_nick}</button>
                            </div>
                        ) : (
                            <div className="w-full max-w-sm space-y-3">
                                <div className="mb-4">
                                    <span className="text-slate-500 font-orbitron text-[10px] uppercase tracking-[0.3em]">{t.agent_label}</span>
                                    <h3 className="text-cyan-400 font-orbitron text-2xl font-bold">{playerName}</h3>
                                    <div className="flex justify-center gap-2 mt-2">
                                        <button onClick={() => setStatus(GameStatus.ACHIEVEMENTS)} className="text-[10px] bg-cyan-500/10 border border-cyan-500/30 px-3 py-1 rounded-full text-cyan-400 uppercase">üèÜ Conquistas</button>
                                        <button onClick={() => { localStorage.removeItem('player-name'); setIsNameSaved(false); }} className="text-[9px] text-slate-600 uppercase">{t.change_profile}</button>
                                    </div>
                                </div>
                                <button onClick={() => startGame(GameMode.PRINCIPIANTE)} className="w-full p-4 bg-emerald-600/90 hover:bg-emerald-500 rounded-xl border border-white/10 flex justify-between items-center transition-all hover:scale-[1.02]">
                                    <div className="text-left"><span className="block font-orbitron font-black text-lg text-white uppercase leading-none">Principiante</span><span className="text-[9px] text-white/60 uppercase">{t.mode_beginner_desc}</span></div>
                                    <div className="text-right text-white/40 font-orbitron text-sm">{localStorage.getItem('cf-best-PRINCIPIANTE') || 0}</div>
                                </button>
                                <button onClick={() => startGame(GameMode.CAOTICO)} className="w-full p-4 bg-orange-600/90 hover:bg-orange-500 rounded-xl border border-white/10 flex justify-between items-center transition-all hover:scale-[1.02]">
                                    <div className="text-left"><span className="block font-orbitron font-black text-lg text-white uppercase leading-none">Ca√≥tico</span><span className="text-[9px] text-white/60 uppercase">{t.mode_chaotic_desc}</span></div>
                                    <div className="text-right text-white/40 font-orbitron text-sm">{localStorage.getItem('cf-best-CAOTICO') || 0}</div>
                                </button>
                                <button onClick={() => startGame(GameMode.EXPERT)} className="w-full p-4 bg-red-700/90 hover:bg-red-600 rounded-xl border border-white/10 flex justify-between items-center transition-all hover:scale-[1.02]">
                                    <div className="text-left"><span className="block font-orbitron font-black text-lg text-white uppercase leading-none">Expert</span><span className="text-[9px] text-white/60 uppercase">{t.mode_expert_desc}</span></div>
                                    <div className="text-right text-white/40 font-orbitron text-sm">{localStorage.getItem('cf-best-EXPERT') || 0}</div>
                                </button>
                            </div>
                        )}
                    </div>
                )}

                {status === GameStatus.ACHIEVEMENTS && (
                    <div className="absolute inset-0 bg-slate-950 z-[150] flex flex-col p-6 overflow-y-auto">
                        <header className="flex items-center justify-between mb-8 sticky top-0 bg-slate-950 py-4 z-10 border-b border-white/10">
                            <h2 className="text-white font-orbitron text-2xl font-black uppercase">{t.achievements_title}</h2>
                            <button onClick={() => setStatus(GameStatus.MENU)} className="p-2 px-4 bg-slate-800 text-white font-orbitron text-xs rounded-xl">VOLTAR</button>
                        </header>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pb-12">
                            {[
                                { id: 'start', icon: 'üö©' }, { id: 'bronze', icon: 'ü•â' }, { id: 'silver', icon: 'ü•à' }, { id: 'gold', icon: 'ü•á' },
                                { id: 'diamond', icon: 'üíé' }, { id: 'platinum', icon: 'üü£' }, { id: 'master', icon: 'üëë' }, { id: 'infinite', icon: 'üåÄ' }, { id: 'god', icon: 'üåå' }
                            ].map(ach => {
                                const unlocked = JSON.parse(localStorage.getItem('cf-achievements') || '[]').some(a => a.id === ach.id);
                                return (
                                    <div key={ach.id} className={`p-4 rounded-2xl border-2 flex items-center gap-4 ${unlocked ? 'bg-slate-900 border-cyan-500/50' : 'bg-slate-900/40 border-slate-800 opacity-60'}`}>
                                        <div className="text-4xl">{unlocked ? ach.icon : 'üîí'}</div>
                                        <div>
                                            <h4 className="font-orbitron font-bold text-sm text-white uppercase">{t.ach_list[ach.id]?.name}</h4>
                                            <p className="text-slate-500 text-[10px]">{t.ach_list[ach.id]?.desc}</p>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                )}

                {status === GameStatus.PLAYING && (
                    <>
                        <div className="absolute top-0 left-0 w-full z-40 p-4 pt-8 pointer-events-none flex flex-col items-center">
                            <span className="text-cyan-500/60 text-[11px] font-orbitron tracking-[0.4em] uppercase font-black">{t.score_label}</span>
                            <div className="text-white text-7xl md:text-9xl font-orbitron font-black drop-shadow-lg leading-none">{score}</div>
                            <div className="w-full max-w-2xl mt-4">
                                <div className="flex justify-between items-end mb-1 px-1">
                                    <span className="text-red-500/70 text-[10px] font-orbitron tracking-widest uppercase font-black">{t.time_label}</span>
                                    <div className="text-white text-xl font-orbitron font-bold">{(timeLeft / 1000).toFixed(2)}s</div>
                                </div>
                                <div className="w-full h-2 bg-slate-900/90 rounded-full overflow-hidden border border-slate-800">
                                    <div className="h-full bg-cyan-500 shadow-[0_0_10px_rgba(6,182,212,0.6)] transition-all duration-75" style={{ width: `${(timeLeft / maxTime) * 100}%` }} />
                                </div>
                            </div>
                        </div>
                        {buttons.map(btn => (
                            <button key={btn.id} onClick={(e) => handleButtonClick(e, btn.isCorrect)} style={{ left: `${btn.position.x}%`, top: `${btn.position.y}%`, transform: `translate(-50%, -50%) scale(${buttonScale})` }} 
                                className={`absolute px-4 py-2 md:px-6 md:py-3 rounded-xl border-2 transition-all active:translate-y-1 z-20 ${btn.isCorrect ? 'bg-[#bf360c] border-[#ff5722] shadow-[0_4px_0_#870000]' : 'bg-[#ff8f00] border-[#ffb300] shadow-[0_4px_0_#c56000]'}`}>
                                <span className="font-orbitron font-black text-white text-xs md:text-sm uppercase tracking-tight">{btn.isCorrect ? t.click_btn : t.no_btn}</span>
                            </button>
                        ))}
                    </>
                )}

                {status === GameStatus.GAMEOVER && (
                    <div className="absolute inset-0 bg-slate-950/95 backdrop-blur-xl flex items-center justify-center z-[200] p-6 animate-in zoom-in duration-300">
                        <div className="max-w-lg w-full text-center space-y-6 flex flex-col items-center">
                            <h2 className="text-white font-orbitron text-5xl md:text-6xl font-black uppercase tracking-tighter drop-shadow-lg">{t.game_over}</h2>
                            {(() => {
                                const best = parseInt(localStorage.getItem(`cf-best-${mode}`) || '0');
                                const medal = getMedalInfo(score);
                                return (
                                    <>
                                        {medal && (
                                            <div className="flex flex-col items-center bg-white/5 p-6 rounded-3xl border border-white/10">
                                                <span className="text-slate-500 font-orbitron text-[9px] uppercase tracking-[0.4em] mb-2">{t.medal_label}</span>
                                                <div className="text-6xl mb-1 drop-shadow-2xl">{medal.icon}</div>
                                                <span className={`font-orbitron font-black text-xl uppercase tracking-tighter ${medal.color}`}>{medal.name}</span>
                                            </div>
                                        )}
                                        <div className="grid grid-cols-2 gap-4 w-full">
                                            <div className="bg-slate-900/50 border border-slate-800 p-4 rounded-2xl text-center">
                                                <span className="text-slate-500 text-[9px] font-orbitron uppercase">{t.score_label}</span>
                                                <div className="text-white text-3xl font-orbitron font-black">{score}</div>
                                            </div>
                                            <div className="bg-slate-900/50 border border-slate-800 p-4 rounded-2xl text-center">
                                                <span className="text-slate-500 text-[9px] font-orbitron uppercase">{t.best_label}</span>
                                                <div className="text-white text-3xl font-orbitron font-black">{best}</div>
                                            </div>
                                        </div>
                                        <div className="w-full space-y-3">
                                            {continueCount < 3 && score > 0 && (
                                                <button onClick={() => { window.open(MONETAG_URL, '_blank'); setContinueCount(c => c + 1); setIsWaitingForAd(true); }} className="w-full py-4 bg-orange-600 hover:bg-orange-500 text-white font-orbitron font-black rounded-2xl text-xs uppercase tracking-tighter shadow-lg transition-all active:scale-95 animate-pulse">
                                                    {t.continue_mission} ({3 - continueCount} rest)
                                                </button>
                                            )}
                                            <button onClick={() => startGame(mode)} className="w-full py-4 bg-red-600 hover:bg-red-500 text-white font-orbitron font-black rounded-2xl text-sm uppercase tracking-widest shadow-xl">REINICIAR</button>
                                            <button onClick={() => setStatus(GameStatus.MENU)} className="w-full py-3 bg-slate-800/50 text-slate-400 font-orbitron font-bold rounded-2xl text-[10px] uppercase border border-slate-700/50">MENU PRINCIPAL</button>
                                        </div>
                                    </>
                                );
                            })()}
                        </div>
                    </div>
                )}
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>